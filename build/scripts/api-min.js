class PlayerAPI{constructor(){this.token=""}get getToken(){return this.token}setToken(e){this.token=e}createNewPlayer(e,t){function a(){this.readyState===XMLHttpRequest.DONE&&200===this.status?(addTextToConsole("El jugador ha sido creado correctamente!"),t(this.responseText)):(addTextToConsole("El nombre del Jugador ya ha sido utilizado!"),console.log("El nombre del Jugador ya ha sido utilizado!"))}(function(e){var t=new XMLHttpRequest;t.addEventListener("load",a),t.open("GET",e,!0),t.send()})("http://puigpedros.salleurl.edu/pwi/arena/api/spawn/"+e)}respawnCurrentPlayer(e,t){function a(){this.readyState===XMLHttpRequest.DONE&&200===this.status?(addTextToConsole("El jugador ha sido actualizado correctamente!"),t()):(addTextToConsole("Ha ocurrido un error en el servidor al intentar actualizar el jugador!"),console.log("Ha ocurrido un error en el servidor al intentar actualizar el jugador!"))}(function(e){var t=new XMLHttpRequest;t.addEventListener("load",a),t.open("GET",e,!0),t.send()})("http://puigpedros.salleurl.edu/pwi/arena/api/respawn/"+e)}deleteCurrentPlayer(e,t){function a(){this.readyState===XMLHttpRequest.DONE&&200===this.status?(addTextToConsole("El jugador ha sido eliminado correctamente!"),t()):(addTextToConsole("Ha ocurrido un error en el servidor al intentar eliminar al jugador!"),console.log("Ha ocurrido un error en el servidor al intentar eliminar al jugador!"))}(function(e){var t=new XMLHttpRequest;t.addEventListener("load",a),t.open("GET",e,!0),t.send()})("http://puigpedros.salleurl.edu/pwi/arena/api/remove/"+e)}getCurrentPlayerInfo(e,t){function a(){this.readyState===XMLHttpRequest.DONE&&200===this.status?t(JSON.parse(this.responseText)):(addTextToConsole("Ha ocurrido un error en el servidor al intentar obtener la información del jugador!"),console.log("Ha ocurrido un error en el servidor al intentar obtener la información del jugador!"))}(function(e){var t=new XMLHttpRequest;t.addEventListener("load",a),t.open("GET",e,!0),t.send()})("http://puigpedros.salleurl.edu/pwi/arena/api/player/"+e)}movePlayer(e,t,a){function n(){this.readyState===XMLHttpRequest.DONE&&200===this.status?(addTextToConsole("El Jugador se ha movido a la dirección: "+t),a()):(addTextToConsole("Te estas chocando contra una pared!"),console.log("Te estas chocando contra una pared!")),enableControlButtons()}(function(e){var t=new XMLHttpRequest;t.addEventListener("load",n),t.open("GET",e,!0),t.send()})("http://puigpedros.salleurl.edu/pwi/arena/api/move/"+e+"/"+t)}attackPlayer(e,t,a){function n(){this.readyState===XMLHttpRequest.DONE&&200===this.status?(addTextToConsole("El Jugador ha atacado a la dirección: "+t),a()):player.getVp>0?(addTextToConsole("No hay ningún enemigo vivo en esta dirección!"),console.log("No hay ningún enemigo vivo en esta dirección!")):(addTextToConsole("Los fantasmas no pueden atacar!"),console.log("Los fantasmas no pueden atacar!")),enableControlButtons()}(function(e){var t=new XMLHttpRequest;t.addEventListener("load",n),t.open("GET",e,!0),t.send()})("http://puigpedros.salleurl.edu/pwi/arena/api/attack/"+e+"/"+t)}showRanking(e){function t(){this.readyState===XMLHttpRequest.DONE&&200===this.status?(addTextToConsole("Se ha mostrado correctamente el Ranking"),e(this.responseText)):(addTextToConsole("Ha ocurrido un error en el servidor al intentar obtener la información del ranking!"),console.log("Ha ocurrido un error en el servidor al intentar obtener la información del ranking!"))}(function(e){var a=new XMLHttpRequest;a.addEventListener("load",t),a.open("GET",e,!0),a.send()})("http://puigpedros.salleurl.edu/pwi/arena/api/ranking")}getNearPlayers(e,t){function a(){this.readyState===XMLHttpRequest.DONE&&200===this.status?t(JSON.parse(this.responseText)):(addTextToConsole("Ha ocurrido un error en el servidor al intentar obtener la información de los enemigos colindantes!"),console.log("Ha ocurrido un error en el servidor al intentar obtener la información de los enemigos colindantes!"))}(function(e){var t=new XMLHttpRequest;t.addEventListener("load",a),t.open("GET",e,!0),t.send()})("http://puigpedros.salleurl.edu/pwi/arena/api/players/"+e)}getMapInfo(e){function t(){this.readyState===XMLHttpRequest.DONE&&200===this.status?e(JSON.parse(this.responseText)):(addTextToConsole("Ha ocurrido un error en el servidor al intentar obtener la información del mapa!"),console.log("Ha ocurrido un error en el servidor al intentar obtener la información del mapa!"))}(function(e){var a=new XMLHttpRequest;a.addEventListener("load",t),a.open("GET",e,!0),a.send()})("http://puigpedros.salleurl.edu/pwi/arena/api/map")}fetchRefreshGame(){fetch("http://puigpedros.salleurl.edu/pwi/arena/api/player/"+player.getToken).then(e=>e.json()).then(e=>{isGameOn&&(player=new Player(e),updateViewWithPlayerInfo())}).then(function(){isGameOn&&getMapInfo()}).then(function(){isGameOn&&setTimeout(getNearPlayers,750)}).then(function(){refreshGame()}).catch(e=>{console.log("error: "+e)})}}